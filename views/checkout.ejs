<%- include('partials/header', {title: "Welcome to 112Cart", desc: "Best Shopping Website"}); -%>

<!-- Start Page Title Area -->
<div class="page-title-area item-bg-3">
	<div class="container">
		<div class="page-title-content">
			<h2>Checkout </h2>
			<ul>
				<li>
					<a href="/">
						Home
						<i class="fa fa-chevron-right"></i>
					</a>
				</li>
				<li>Checkout</li>
			</ul>
		</div>
	</div>
</div>
<!-- End Page Title Area -->

<!-- Start Checkout Area -->
<section class="checkout-area ptb-100">
	<div class="container">
		<div class="row">
			<div class="col-lg-6 col-md-12">
				<div class="order-details">
					<div class="order-table table-responsive">
						<div class="payment-box">
							<form method="POST" action="/checkout">
								<div class="payment-method">
									<h3 class="title" style="font-family: 'PT Sans', sans-serif;">Addresses</h3>
									<% address.address.forEach(el => { %>
									<p>
										<input type="radio" id="<%=el._id%>" name="address" value="<%=el._id%>">
										<label for="<%=el._id%>"><span
												style="color: #fa7725; text-transform: uppercase; font-size: medium;"><%=el.addressType%></span><br>
											<%=(el.fullAddress + ", " + el.landmark  + ", " + el.locality + ", " + 
												el.city + ", " + el.state +".")%><br>
											PIN: <%=(el.pincode) %><br>
											Phone Number: <span
												style="color: #fa7725; text-transform: uppercase;"><%=el.phone%></span></label>
									</p>
									<% }) %>
								</div>
								<div class="payment-method">
									<div class="uk-child-width-expand@s uk-text-center" uk-grid>
										<p>
											<input type="radio" id="5P" name="radio-group">
											<label for="5P" value=5>5%</label>
										</p>
										<p>
											<input type="radio" id="10P" name="radio-group">
											<label for="10P" value=10>10%</label>
										</p>
										<p>
											<input type="radio" id="20P" name="radio-group">
											<label for="20P" value=20>20%</label>
										</p>
									</div>
								</div>
								<div class="col-lg-6 col-md-6">
									<div class="form-group">
										<input type="text" class="form-control" placeholder="Offer Code" name="offer">
									</div>
								</div>
								<button class="default-btn" type="submit">Place Order</button>
								<% if (codAllowed) { %>
								<button class="default-btn" type="submit" formaction="/order-cod">Place Order as
									COD</button>
								<% } %>
								<% if (currentUser.isBusiness && currentUser.creditAllowed) { %>
								<button class="default-btn" type="submit" formaction="/order-credit">Place Order as
									Credit</button>
								<% } %>
								<button class="default-btn" type="submit" formaction="/save-order">Save Order</button>
								<button class="default-btn" type="submit" formaction="">Create Quote</button>
								<!-- Prakhar writes formaction-->
							</form>
						</div>
					</div>
				</div>
			</div>

			<div class="col-lg-6 col-md-12">
				<div class="order-details">
					<h3 class="title" style="font-family: 'PT Sans', sans-serif;">Your Order</h3>

					<div class="order-table table-responsive">
						<table class="table table-bordered">
							<thead>
								<tr>
									<th scope="col">Product Name</th>
									<th scope="col">Quantity</th>
									<th scope="col">Total</th>
								</tr>
							</thead>

							<tbody>
								<% var sum = 0 %>
								<% for (let i = 0; i < cart.length; i++) { %>
								<tr>
									<td class="product-name">
										<a href="#"><%= cart[i].item.name %></a>
									</td>
									<td class="product-quantity">
										<span class="subtotal-amount"><%= cart[i].quantity%></span>
									</td>
									<td class="product-total">
										<span class="subtotal-amount">Rs.
											<%= parseInt(cart[i].quantity) * parseInt(cart[i].price[0])%></span>
									</td>
									<% sum = sum + parseInt(cart[i].quantity) * parseInt(cart[i].price[0]) %>
								</tr>
								<% } %>

								<tr>
									<td class="order-subtotal">
										<span>Cart Subtotal</span>
									</td>
									<td></td>
									<td class="order-subtotal-price">
										<span class="order-subtotal-amount">Rs. <%=sum%></span>
									</td>
								</tr>

								<tr>
									<td class="order-shipping">
										<span>GST (18%)</span>
									</td>
									<td></td>
									<td class="shipping-price">
										<span>Rs. <%=(sum * (18/100))%></span>
									</td>
								</tr>

								<tr>
									<td class="total-price">
										<span>Order Total</span>
									</td>
									<td></td>
									<td class="product-subtotal">
										<span class="subtotal-amount">Rs. <%=(sum * (118/100))%></span>
									</td>
								</tr>
							</tbody>

						</table>
					</div>
					<!-- <div class="payment-box">
								<div class="payment-method">
									<p>
										<input type="radio" id="direct-bank-transfer" name="radio-group" checked>
										<label for="direct-bank-transfer">Direct Bank Transfer</label>

										Make your payment directly into our bank account. Please use your Order ID as the payment reference. Your order will not be shipped until the funds have cleared in our account.
									</p>
									<p>
										<input type="radio" id="paypal" name="radio-group">
										<label for="paypal">PayPal</label>
									</p>
									<p>
										<input type="radio" id="cash-on-delivery" name="radio-group">
										<label for="cash-on-delivery">Cash on Delivery</label>
									</p>
								</div>

								<button class="default-btn">Place Order</button>
							</div> -->
				</div>
			</div>
		</div>
	</div>
</section>
<!-- End Checkout Area -->

<%- include('partials/footer'); -%>